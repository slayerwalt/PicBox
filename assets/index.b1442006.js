var ge=Object.defineProperty,me=Object.defineProperties;var he=Object.getOwnPropertyDescriptors;var le=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var Q=(e,a,t)=>a in e?ge(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,U=(e,a)=>{for(var t in a||(a={}))fe.call(a,t)&&Q(e,t,a[t]);if(le)for(var t of le(a))we.call(a,t)&&Q(e,t,a[t]);return e},j=(e,a)=>me(e,he(a));var ne=(e,a,t)=>(Q(e,typeof a!="symbol"?a+"":a,t),t);import{C as ye,a as Fe,b as $e,e as xe,d as Ee,c as be,f as M,o as g,g as m,r as ue,n as P,h as n,i as y,t as D,j as T,k as h,w as N,l as k,v as ke,m as Be,F as K,p as W,q as z,s as G,u as X,x as ee,y as H,z as w,A as E,B as s,D as V,E as B,G as Se,H as Ie,I as Ce,J as Ae,K as Le,L as De}from"./vendor.624dd54d.js";const Me=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}};Me();const $=({type:e,text:a})=>{let t=document.getElementById("alert-box");var l=document.createElement("div");let i={success:'<svg class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512"><path d="M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M352 176L217.6 336L160 272"></path></svg>',warning:'<svg class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512"><path d="M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></path><path d="M250.26 166.05L256 288l5.73-121.95a5.74 5.74 0 0 0-5.79-6h0a5.74 5.74 0 0 0-5.68 6z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path d="M256 367.91a20 20 0 1 1 20-20a20 20 0 0 1-20 20z" fill="currentColor"></path></svg>',danger:'<svg class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512"><path d="M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M320 320L192 192"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M192 320l128-128"></path></svg>'};l.innerHTML=`${i[e]}<span>${a}</span>`,l.style.cssText="",l.setAttribute("class",`alert alert-${e} shadow`),t.appendChild(l,t.childNodes[0]),setTimeout(()=>{l.setAttribute("class",`alert alert-${e} alert-show shadow`),setTimeout(()=>{l.setAttribute("class",`alert alert-${e} alert-hidden`),setTimeout(()=>{t.removeChild(l)},250)},2500)},10)};function re(e){if(!e)return"";var a=1024;return e<a?e+" b":e<Math.pow(a,2)?(e/a).toFixed(2)+" KB":e<Math.pow(a,3)?(e/Math.pow(a,2)).toFixed(2)+" M":e<Math.pow(a,4)?(e/Math.pow(a,3)).toFixed(2)+" G":(e/Math.pow(a,4)).toFixed(2)+" T"}function te(){var e=new ye(".copy-btn");e.on("success",a=>{$({type:"success",text:"\u590D\u5236\u6210\u529F\uFF01"}),e.destroy()}),e.on("error",a=>{$({type:"danger",text:"\u590D\u5236\u5931\u8D25\uFF01"}),e.destroy()})}function Oe(e){switch(!0){case e=="Bad credentials":return"access token \u9519\u8BEF";case e.indexOf("wasn't supplied")>=0:return"\u8BF7\u52FF\u91CD\u590D\u4E0A\u4F20\u76F8\u540C\u5185\u5BB9";case e=="This repository is empty.":return"\u5F53\u524D\u4ED3\u5E93\u4E3A\u7A7A\uFF0C\u8BF7\u65B0\u5EFA\u4E00\u4E2A\u6587\u4EF6\u5939";case e=="path cannot start with a slash":return"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A";case e=="Requires authentication":return"access token \u9519\u8BEF";case e=="Bad credentials":return"\u672A\u77E5\u9519\u8BEF";default:return"\u672A\u77E5\u9519\u8BEF"}}class Pe{constructor(a){ne(this,"instance");this.instance=Fe.create(a),this.instance.interceptors.request.use(t=>{let l=localStorage.getItem("token");return l&&(t.headers={Authorization:`token ${l}`}),t},t=>(console.log(t),Promise.reject(t))),this.instance.interceptors.response.use(t=>t,t=>(t.response.data.message!="Not Found"&&$({type:"danger",text:Oe(t.response.data.message)}),Promise.reject(t)))}request(a){return new Promise((t,l)=>{this.instance.request(a).then(i=>{t(i)}).catch(i=>(l(i),i))})}get(a){return this.request(j(U({},a),{method:"GET"}))}post(a){return this.request(j(U({},a),{method:"POST"}))}put(a){return this.request(j(U({},a),{method:"PUT"}))}delete(a){return this.request(j(U({},a),{method:"DELETE"}))}patch(a){return this.request(j(U({},a),{method:"PATCH"}))}}const q=new Pe({baseURL:"https://api.github.com",timeout:3e4}),Te=(e,a)=>new Promise(async t=>{const i=await new $e(e,{encoderState:{type:"mozJPEG",options:xe.mozJPEG.meta.defaultOptions},processorState:Ee,preprocessorState:be}).process(),o=await ie(i),d=await ie(e);t({name:`${e.name.substring(0,e.name.lastIndexOf("."))}_${qe(6)}`,orginal_size:e.size,compress_size:i.size,base64data:o.replace(/^data:image\/\w+;base64,/,""),base64:o,orginal_base64data:d.replace(/^data:image\/\w+;base64,/,""),orginal_base64:d,folder:a,ext:Ve(e.name)})}),ie=e=>new Promise(async a=>{var t=new FileReader;t.readAsDataURL(e),t.onload=function(l){a(l.target.result)}});function Ve(e){var a=/\.[^\.]+$/,t=a.exec(e);return t?t[0]:""}function qe(e){return Array.from(Array(Number(e)||24),()=>Math.floor(Math.random()*36).toString(36)).join("")}var O=(e,a)=>{for(const[t,l]of a)e[t]=l;return e};const Ne=M({props:{type:{type:String,default:"default"},loading:{type:Boolean,default:!1}},setup(e){const a=e;return(t,l)=>(g(),m("button",{class:P(["button",`button-${a.type}  ${a.loading?"button-loading":""}`])},[ue(t.$slots,"default",{},void 0,!0)],2))}});var I=O(Ne,[["__scopeId","data-v-1f5f32e1"]]);const Ue={class:"title-label"},je=["href"],ze=["innerHTML"],Ge=M({props:{title:{type:String,default:"\u6807\u9898"},direction:{type:String,default:""},small_title:{type:String,default:""},small_title_link:{type:String,default:""},tips:{type:String,default:""}},setup(e){const a=e;return(t,l)=>(g(),m("div",{class:P(["form-item",{isRow:a.direction=="row"}])},[n("label",Ue,[y(D(a.title)+" ",1),a.small_title?(g(),m("a",{key:0,target:"_blank",href:a.small_title_link},D(a.small_title),9,je)):T("",!0)]),n("div",null,[ue(t.$slots,"default",{},void 0,!0),e.tips?(g(),m("p",{key:0,class:"tips",innerHTML:e.tips},null,8,ze)):T("",!0)])],2))}});var Y=O(Ge,[["__scopeId","data-v-1c1caa4e"]]);const Re=["disabled"],He=M({props:{modelValue:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,l=h(t.modelValue);N(()=>t.modelValue,()=>{l.value=t.modelValue});const i=o=>{let{value:d}=o.target;a("update:modelValue",d)};return(o,d)=>k((g(),m("input",{"onUpdate:modelValue":d[0]||(d[0]=p=>l.value=p),onInput:i,disabled:t.disabled},null,40,Re)),[[ke,l.value]])}});var de=O(He,[["__scopeId","data-v-4ada4ad8"]]);const Je=e=>(z("data-v-ae18d42e"),e=e(),G(),e),Ke=Je(()=>n("option",{value:"",hidden:""},"\u672A\u9009\u62E9",-1)),We=["value"],Ye=M({props:{modelValue:{type:String||Number,default:""},option:{type:Array,default:[]},label:{type:String||Number,default:""},value:{type:String||Number,default:""}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,l=h(t.modelValue);N(()=>t.modelValue,()=>{l.value=t.modelValue});const i=o=>{let{value:d}=o.target;a("update:modelValue",d)};return(o,d)=>k((g(),m("select",{"onUpdate:modelValue":d[0]||(d[0]=p=>l.value=p),onChange:i},[Ke,(g(!0),m(K,null,W(t.option,p=>(g(),m("option",{value:p[e.value],key:p[e.label]},D(p[e.label]),9,We))),128))],544)),[[Be,l.value]])}});var ce=O(Ye,[["__scopeId","data-v-ae18d42e"]]);const Z=e=>(z("data-v-09665e0d"),e=e(),G(),e),Ze=Z(()=>n("path",{d:"M400 145.49L366.51 112L256 222.51L145.49 112L112 145.49L222.51 256L112 366.51L145.49 400L256 289.49L366.51 400L400 366.51L289.49 256L400 145.49z",fill:"currentColor"},null,-1)),Qe=[Ze],Xe={class:"select"},et={class:"upload-list"},tt=Z(()=>n("svg",{class:"upload-icon",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},[n("path",{d:"M320 367.79h76c55 0 100-29.21 100-83.6s-53-81.47-96-83.6c-8.89-85.06-71-136.8-144-136.8c-69 0-113.44 45.79-128 91.2c-60 5.7-112 43.88-112 106.4s54 106.4 120 106.4h56",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"18"}),n("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"18",d:"M320 255.79l-64-64l-64 64"}),n("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"18",d:"M256 448.21V207.79"})],-1)),at={class:"title-label"},st={class:"status-box"},ot={class:"icon icon-success",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},lt=Z(()=>n("path",{fill:"none",stroke:"currentColor","stroke-linecap":"square","stroke-miterlimit":"10","stroke-width":"44",d:"M416 128L192 384l-96-96"},null,-1)),nt=[lt],ut={class:"icon icon-uploading",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},rt=Z(()=>n("path",{d:"M256 48C141.13 48 48 141.13 48 256s93.13 208 208 208s208-93.13 208-208S370.87 48 256 48zm83.69 282.65a112.24 112.24 0 0 1-195-61.29a16 16 0 0 1-20.13-24.67l23.6-23.6a16 16 0 0 1 22.37-.25l24.67 23.6a16 16 0 0 1-18 26a80.25 80.25 0 0 0 138.72 38.83a16 16 0 0 1 23.77 21.41zm47.76-63.34l-23.6 23.6a16 16 0 0 1-22.37.25l-24.67-23.6a16 16 0 0 1 17.68-26.11A80.17 80.17 0 0 0 196 202.64a16 16 0 1 1-23.82-21.37a112.17 112.17 0 0 1 194.88 61.57a16 16 0 0 1 20.39 24.47z",fill:"currentColor"},null,-1)),it=[rt],dt={class:"info"},ct={class:"name"},pt={class:"tag-box"},_t={class:"tag folder"},vt={class:"tag orginal-size"},gt=["src"],mt={class:"btn-box"},ht=y("\u6E05\u7A7A"),ft=y("\u4E0A\u4F20"),wt=M({props:{isOpen:Boolean,folders:Array},emits:["Close","SetLoading"],setup(e,{emit:a}){const t=e,l=X(),i=ee();let o=h(l.query.folder),d=h([]);N(()=>l.query,r=>{o.value=r.folder||""}),N(()=>o.value,r=>{l.path!="/setting"&&i.push(`/?folder=${r}`)});let p=JSON.parse(localStorage.getItem("github_config")),_=h(null),F=h(!1),b=h(!1);H(()=>{let r=document.getElementById("drop-area");r.addEventListener("drop",C,!1);let c="";r.addEventListener("dragleave",u=>{clearTimeout(c),c=setTimeout(()=>{u.stopPropagation(),u.preventDefault(),b.value=!1},200)}),r.addEventListener("dragover",u=>{u.stopPropagation(),u.preventDefault(),b.value=!0})});const C=r=>{if(!o.value){$({type:"danger",text:"\u8BF7\u9009\u62E9\u6587\u4EF6\u5939"});return}let c=r.dataTransfer.files;b.value=!1,r.stopPropagation(),r.preventDefault();let u=[];console.log(c);for(let L=0;L<=c.length-1;L++)console.log(c[L].type.indexOf("image")!==-1),c[L].type.indexOf("image")!==-1?u.push(c[L]):$({type:"danger",text:`${c[L].name} \u4E0D\u662F\u56FE\u7247\u6587\u4EF6`});x(u)},A=r=>{if(!o.value){$({type:"danger",text:"\u8BF7\u9009\u62E9\u6587\u4EF6\u5939"});return}const c=r.clipboardData.items;let u=null;c.length>0&&(c[0].kind=="file"?(u=c[0].getAsFile(),u.type.indexOf("image")>=0?x([u]):$({type:"danger",text:"\u8BF7\u7C98\u8D34\u56FE\u7247\u6587\u4EF6"})):$({type:"danger",text:"\u8BF7\u7C98\u8D34\u56FE\u7247\u6587\u4EF6"}))},f=r=>{if(!o.value){$({type:"danger",text:"\u8BF7\u9009\u62E9\u6587\u4EF6\u5939"});return}let c=r.target.files;x(c)},x=async r=>{F.value=!0,$({type:"warning",text:"\u8BFB\u53D6\u4E2D"});let c=[];c=await Promise.all([...r].map(u=>Te(u,o.value))),$({type:"success",text:"\u8BFB\u53D6\u5B8C\u6210"}),F.value=!1,d.value=d.value.concat(c)},S=async r=>{_.value=r;let c=0;await Promise.all(d.value.map((u,L)=>(d.value[L].status="uploading",new Promise(J=>{let oe=r==1?`${u.name}_${u.ext}`:`${u.name}_.jpeg`;setTimeout(()=>{q.put({url:`/repos/${p.owner}/${p.repoPath}/contents/${o.value}/${oe}`,data:{message:"upload a image by picbox",content:r==1?u.orginal_base64data:u.base64data}}).then(ve=>{let R=ve.data.content;u.status="success",d.value[L].status="success",u.url=R.url,u.download_url=R.download_url,u.cdn_url=`https://git.pink/${p.owner}/${p.repoPath}/blob/main/${o.value}/${oe}?raw=true`,u.git_url=R.git_url,u.sha=R.sha,u.upload_type=r,u.html_url=R.html_url,v(u),J(200)}).catch(()=>{u.status="fail",d.value[L].status="fail",J(400)})},c+=1e3)})))),$({type:"success",text:"\u4E0A\u4F20\u5B8C\u6210"}),_.value=0,d.value=d.value.filter(u=>u.status!="success"),i.push(l.fullPath+="&t="+new Date().getTime())},v=r=>{r.name,r.orginal_size,r.base64,r.folder,r.status,r.ext,r.cdn_url};return(r,c)=>(g(),m("div",{class:P(["image-modal",{isOpen:t.isOpen}]),id:"drop-area",onPaste:A},[(g(),m("svg",{onClick:c[0]||(c[0]=u=>a("Close")),class:"icon-close",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Qe)),n("div",Xe,[w(s(Y),{title:"\u9009\u62E9\u6587\u4EF6\u5939"},{default:E(()=>[w(s(ce),{modelValue:s(o),"onUpdate:modelValue":c[1]||(c[1]=u=>V(o)?o.value=u:o=u),option:t.folders,label:"name",value:"name"},null,8,["modelValue","option"])]),_:1})]),n("div",et,[n("label",{class:P(["upload-box",{dropActive:s(b),uploadBoxLoading:s(F)}])},[tt,y(D(s(b)?"\u677E\u5F00\u9F20\u6807\u4E0A\u4F20\u6587\u4EF6":"\u70B9\u51FB\u3001\u62D6\u62FD\u3001\u7C98\u8D34\u5230\u6B64\u5904\u4E0A\u4F20\u6587\u4EF6")+" ",1),k(n("input",{onChange:f,type:"file",name:"file",accept:"image/*",multiple:""},null,544),[[B,!1]])],2),k(n("div",at,"\u5F85\u4E0A\u4F20\u56FE\u7247",512),[[B,s(d).length>0]]),(g(!0),m(K,null,W(s(d),u=>(g(),m("div",{key:u.name,class:"item"},[n("div",st,[k((g(),m("svg",ot,nt,512)),[[B,u.status=="success"]]),k((g(),m("svg",ut,it,512)),[[B,u.status=="uploading"]])]),n("div",dt,[n("div",ct,D(`${u.name}_.jpeg`),1),n("div",pt,[n("span",_t,D(u.folder),1),n("span",vt,D(s(re)(u.orginal_size)),1)])]),n("img",{src:u.base64,class:"image"},null,8,gt)]))),128))]),n("div",mt,[k(w(s(I),{style:{width:"220px"},onClick:c[2]||(c[2]=u=>V(d)?d.value=[]:d=[]),type:"danger"},{default:E(()=>[ht]),_:1},512),[[B,s(d).length>0]]),k(w(s(I),{onClick:c[3]||(c[3]=u=>S(1)),type:"primary",style:{width:"220px"},loading:s(_)==1},{default:E(()=>[ft]),_:1},8,["loading"]),[[B,s(d).length>0]])])],34))}});var yt=O(wt,[["__scopeId","data-v-09665e0d"]]);const Ft={class:"form-item btn-box"},$t=y(" \u786E\u8BA4 "),xt=y("\u53D6\u6D88"),Et=M({props:{isOpen:Boolean},emits:["close","updateFolderList"],setup(e,{emit:a}){const t=e;let l=JSON.parse(localStorage.getItem("github_config")),i=h(""),o=h(!1);const d=()=>{if(!(l==null?void 0:l.repoId)){$({type:"danger",text:"\u8BF7\u524D\u5F80\u8BBE\u7F6E\uFF0C\u5B8C\u6210\u914D\u7F6E\u4FE1\u606F"});return}o.value=!0,q.put({url:`/repos/${l.owner}/${l.repoPath}/contents/${i.value}/init`,data:{message:"add a forder",content:"5q2k5paH5Lu255So5LqO5Yib5bu65paH5Lu25aS5"}}).then(p=>{o.value=!1,$({type:"success",text:"\u521B\u5EFA\u6210\u529F\uFF01"}),i.value="",a("close"),a("updateFolderList")}).catch(()=>{o.value=!1})};return(p,_)=>(g(),m("div",{class:P(["folder-modal",{isOpen:t.isOpen}])},[w(s(Y),{title:"\u65B0\u5EFA\u6587\u4EF6\u5939"},{default:E(()=>[w(s(de),{modelValue:s(i),"onUpdate:modelValue":_[0]||(_[0]=F=>V(i)?i.value=F:i=F),placeholder:"\u8F93\u5165\u6587\u4EF6\u5939\u540D\u79F0"},null,8,["modelValue"])]),_:1}),n("div",Ft,[w(s(I),{onClick:_[1]||(_[1]=F=>d()),type:"primary",loading:s(o)},{default:E(()=>[$t]),_:1},8,["loading"]),w(s(I),{onClick:_[2]||(_[2]=F=>a("close")),type:"danger"},{default:E(()=>[xt]),_:1})])],2))}});var bt=O(Et,[["__scopeId","data-v-69bed7ea"]]);const ae=e=>(z("data-v-3852794e"),e=e(),G(),e),kt={class:"wrapper"},Bt={class:"sidebar"},St=ae(()=>n("div",{class:"header"},[n("div",{class:"mask"}),n("div",{class:"logo"},"PicBox")],-1)),It=["href"],Ct=ae(()=>n("span",{class:"status-point"},null,-1)),At={class:"tips"},Lt={key:0},Dt={key:1},Mt={key:2},Ot=y("\u672A\u8BBE\u7F6Etoken"),Pt=ae(()=>n("br",null,null,-1)),Tt=y("\u8BF7\u70B9\u51FB\u4E0B\u65B9\u8BBE\u7F6E"),Vt=[Ot,Pt,Tt],qt=y(" \u7ACB\u5373\u521B\u5EFA "),Nt={class:"handle-box"},Ut=y(" \u4E0A\u4F20\u56FE\u7247 "),jt=y(" \u65B0\u5EFA\u6587\u4EF6\u5939 "),zt={href:"/PicBox/#/setting"},Gt=y(" \u8BBE\u7F6E "),Rt={href:"/PicBox/#/about"},Ht=y(" \u5173\u4E8E "),Jt=M({emits:["SetImageModal"],setup(e,{expose:a,emit:t}){const l=X(),i=ee();let o=JSON.parse(localStorage.getItem("github_config")),d=h([]),p=h(!1),_=h(!1),F=h(!1);H(()=>{(o==null?void 0:o.repoId)&&b()}),N(()=>l.query,A=>{_.value=!1,!(o==null?void 0:o.owner)&&l.path!="/setting"&&l.path!="/about"?i.push("/setting"):l.query.reload&&b()}),N(()=>p.value,A=>{p.value?t("SetImageModal",!0):t("SetImageModal",!1)});const b=()=>{F.value=!0,q.get({url:`/repositories/${o.repoId}/contents?t=${new Date().getTime()}`}).then(A=>{F.value=!1,d.value=A.data.filter(f=>f.type=="dir"),l.path=="/"&&!l.query.folder&&i.push(`/?folder=${d.value[0].name}`)}).catch(()=>{F.value=!1})},C=()=>{if(!(o==null?void 0:o.repoId)){$({type:"danger",text:"\u8BF7\u524D\u5F80\u8BBE\u7F6E\uFF0C\u5B8C\u6210\u914D\u7F6E\u4FE1\u606F"});return}p.value=!p.value};return a({changeImageModel:C}),(A,f)=>{var x,S,v;return g(),m("div",kt,[n("div",Bt,[St,n("div",{class:P(["folder",{loading:s(F)}])},[(g(!0),m(K,null,W(s(d),(r,c)=>(g(),m("a",{key:c,class:P(["item",{active:s(l).query.folder==r.name}]),href:`/#/?folder=${r.name}`},[y(D(r.name)+" ",1),Ct],10,It))),128)),k(n("div",At,[s(d).length!=0?(g(),m("span",Lt,D(s(d).length)+" \u4E2A\u6587\u4EF6\u5939",1)):T("",!0),((x=s(o))==null?void 0:x.owner)&&s(d).length==0?(g(),m("span",Dt,"\u6682\u65E0\u6587\u4EF6\u5939 ")):T("",!0),((S=s(o))==null?void 0:S.owner)?T("",!0):(g(),m("span",Mt,Vt))],512),[[B,!s(F)]]),((v=s(o))==null?void 0:v.owner)&&s(d).length==0?k((g(),Se(I,{key:0,style:{"margin-top":"10px"},type:"primary",onClick:f[0]||(f[0]=r=>V(_)?_.value=!s(_):_=!s(_))},{default:E(()=>[qt]),_:1},512)),[[B,!s(F)]]):T("",!0)],2),w(bt,{onClose:f[1]||(f[1]=r=>V(_)?_.value=!1:_=!1),onUpdateFolderList:f[2]||(f[2]=r=>b()),isOpen:s(_)},null,8,["isOpen"]),n("div",Nt,[w(I,{onClick:C},{default:E(()=>[Ut]),_:1}),w(I,{onClick:f[3]||(f[3]=r=>V(_)?_.value=!s(_):_=!s(_))},{default:E(()=>[jt]),_:1}),n("a",zt,[w(I,null,{default:E(()=>[Gt]),_:1})]),n("a",Rt,[w(I,null,{default:E(()=>[Ht]),_:1})])])]),w(yt,{isOpen:s(p),folders:s(d),onClose:C},null,8,["isOpen","folders"])])}}});var Kt=O(Jt,[["__scopeId","data-v-3852794e"]]);const Wt=e=>(z("data-v-571d62ec"),e=e(),G(),e),Yt={class:"wrapper"},Zt=Wt(()=>n("div",{id:"alert-box"},null,-1)),Qt=M({setup(e){let a=h(!1),t=h(!1);const l=p=>{a.value=p},i=p=>{t.value=p},o=h(null),d=()=>{o.value.changeImageModel()};return H(()=>{localStorage.getItem("github_config")&&JSON.parse(localStorage.getItem("github_config"))}),(p,_)=>{const F=Ie("router-view");return g(),m("div",Yt,[Zt,w(Kt,{onSetImageModal:l,ref:(b,C)=>{C.sideberRef=b,o.value=b}},null,512),n("div",{class:P(["main",{loading:s(t)}]),id:"main",style:Ce(s(a)?"width:calc(100% - 700px);margin-left:500px":"width:calc(100% - 200px)")},[w(F,{onSetLoading:i,onOpenUploadModel:_[0]||(_[0]=b=>d())})],6)])}}});var Xt=O(Qt,[["__scopeId","data-v-571d62ec"]]);const se=e=>(z("data-v-d12dcb0a"),e=e(),G(),e),ea={class:"index-wrapper"},ta={class:"not-found"},aa=se(()=>n("div",{class:"title"},"\u65E0\u56FE\u7247",-1)),sa=se(()=>n("br",null,null,-1)),oa=se(()=>n("br",null,null,-1)),la={style:{"margin-top":"10px"}},na=y("\u4E0A\u4F20\u56FE\u7247"),ua=y("\u5220\u9664\u6587\u4EF6\u5939"),ra={class:"list"},ia=["onClick"],da=["data-info","href"],ca=["src"],pa={class:"info"},_a={class:"name"},va={class:"copy-box"},ga=["data-clipboard-text"],ma=["data-clipboard-text"],ha=["data-clipboard-text"],fa={key:0,class:"footer"},wa=M({emits:["SetLoading","OpenUploadModel"],setup(e,{expose:a,emit:t}){const l=X(),i=ee();N(()=>l.query,v=>{v.folder&&_(v.folder)});let o=h([]),d=h([]);H(()=>{(p==null?void 0:p.owner)?_(l.query.folder):i.push("/setting")});let p=JSON.parse(localStorage.getItem("github_config"));const _=v=>{t("SetLoading",!0),q.get({url:`/repositories/${p==null?void 0:p.repoId}/contents/${v||""}?t=${new Date().getTime()}`}).then(r=>{d.value=r.data,t("SetLoading",!1),r.data.forEach(u=>{u.download_url&&(u.origin_url=`https://raw.githubusercontent.com/${p.owner}/${p.repoPath}/main/${v}/${u.name}`,u.cdn_url=`https://cdn.jsdelivr.net/gh/${p.owner}/${p.repoPath}@master/${v}/${u.name}`)});function c(u){var L=u.lastIndexOf("."),J=u.substr(L+1);return["png","jpg","jpeg","bmp","gif","webp","psd","svg","tiff"].indexOf(J.toLowerCase())>=0}o.value=r.data.filter(u=>c(u.name))}).catch(()=>{t("SetLoading",!1)})},F=v=>{var r=v.substring(v.lastIndexOf("/")+1);return`![${r}](${v})`},b=v=>` ${v}`,C=v=>` ${v}`;let A=h(!1);const f=()=>{var v,r;((v=d.value[0])==null?void 0:v.name)=="init"?(A.value=!0,q.delete({url:`/repos/${p.owner}/${p.repoPath}/contents/${l.query.folder}/init`,data:{message:"delete init file",sha:(r=d.value[0])==null?void 0:r.sha}}).then(()=>{$({type:"success",text:"\u5220\u9664\u6210\u529F"}),A.value=!1,i.push("/?reload=true")})):$({type:"success",text:"\u8BE5\u6587\u4EF6\u5939\u5185\u6709\u5176\u4ED6\u6587\u4EF6\uFF0C\u8BF7\u5148\u767B\u5F55Github\u4E2D\u5220\u9664\u6240\u6709\u6587\u4EF6\u3002"})},x=v=>{t("SetLoading",!0),q.delete({url:`/repos/${p.owner}/${p.repoPath}/contents/${l.query.folder}/${v.name}`,data:{message:"delete a image",sha:v.sha}}).then(()=>{$({type:"success",text:"\u5220\u9664\u6210\u529F"}),_(l.query.folder)}).catch(()=>{t("SetLoading",!1)})},S=v=>`
    <div class="image-info">
    <div class="item"><span>\u540D\u79F0</span><div>${v.name}</div></div>
    <div class="item"><span>\u5927\u5C0F</span><div>${re(v.size)}</div></div>
    <div class="item"><span>url</span><div>${v.url}</div></div>
    <div class="item"><span>html_url</span><div>${v.html_url}</div></div>
    <div class="item"><span>git_url</span><div>${v.git_url}</div></div>
    <div class="item"><span>download_url</span><div>${v.download_url}</div> </div>
  `;return a({GetImages:_}),(v,r)=>(g(),m("div",ea,[k(n("div",ta,[aa,sa,oa,n("div",la,[w(I,{onClick:r[0]||(r[0]=c=>t("OpenUploadModel")),type:"primary",style:{width:"120px",margin:"10px auto"}},{default:E(()=>[na]),_:1}),w(I,{onClick:f,type:"danger",loading:s(A),style:{width:"120px",margin:"0 auto"}},{default:E(()=>[ua]),_:1},8,["loading"])])],512),[[B,s(o).length==0]]),k(n("div",ra,[(g(!0),m(K,null,W(s(o),c=>(g(),m("div",{key:`${c.name}`,class:"item"},[n("div",{onClick:u=>x(c),class:"del"},null,8,ia),n("a",{class:"image","data-info":S(c),href:c.cdn_url,"data-fancybox":"gallery"},[n("img",{src:c.cdn_url,loading:"lazy"},null,8,ca)],8,da),n("div",pa,[n("div",_a,D(c.name),1),n("div",va,[n("span",{class:"copy-btn","data-clipboard-text":C(c.origin_url),onClick:r[1]||(r[1]=u=>s(te)())},"url",8,ga),n("span",{class:"copy-btn","data-clipboard-text":b(c.cdn_url),onClick:r[2]||(r[2]=u=>s(te)())},"cdn",8,ma),n("span",{class:"copy-btn","data-clipboard-text":F(c.cdn_url),onClick:r[3]||(r[3]=u=>s(te)())},"markdown",8,ha)])])]))),128))],512),[[B,s(o).length>0]]),s(o).length>0?(g(),m("div",fa,D(s(o).length)+" \u5F20\u56FE\u7247 ",1)):T("",!0)]))}});var ya=O(wa,[["__scopeId","data-v-d12dcb0a"]]);const Fa={class:"form"},$a={key:0,class:"title-1"},xa={class:"user-info"},Ea=["src"],ba={class:"name"},ka={class:"form"},Ba=y(" \u786E\u5B9A "),Sa=y(" \u4FDD\u5B58\u914D\u7F6E "),Ia=y(" \u5220\u9664\u914D\u7F6E "),Ca=M({setup(e){H(()=>{if(localStorage.getItem("github_config")){let f=JSON.parse(localStorage.getItem("github_config"));t.value=f}else t.value.repoId="";localStorage.getItem("token")&&(l.value=localStorage.getItem("token"),_())});const a=h([]);let t=h({}),l=h(""),i=h(!1),o=h(!1),d=h(!1),p=h(!1);const _=()=>{q.get({url:"/user"}).then(f=>{t.value.owner=f.data.login,t.value.name=f.data.name,t.value.avatarUrl=f.data.avatar_url,localStorage.setItem("github_config",JSON.stringify(t.value)),b()}).catch(()=>{i.value=!1,p.value=!1})},F=()=>{localStorage.setItem("token",l.value),_()},b=()=>{q.get({url:`/users/${t.value.owner}/repos?type=public&sort=created&per_page=100`}).then(f=>{a.value=f.data,i.value=!1,!t.value.repoId&&l.value==" "&&(t.value.repoId=1,C())})},C=()=>{if(!t.value.repoId){$({type:"warning",text:"\u8BF7\u9009\u62E9\u4ED3\u5E93"});return}o.value=!0,t.value.repoPath=a.value.find(f=>t.value.repoId==f.id).name,localStorage.setItem("github_config",JSON.stringify(t.value)),setTimeout(()=>{$({type:"success",text:"\u4FDD\u5B58\u6210\u529F\uFF01"}),o.value=!1,location.reload()},500)},A=()=>{localStorage.removeItem("token"),localStorage.removeItem("github_config"),localStorage.removeItem("history_list"),d.value=!0,$({type:"success",text:"\u5220\u9664\u6210\u529F"}),setTimeout(()=>{d.value=!1,location.reload()},500)};return(f,x)=>(g(),m("div",Fa,[s(t).name?T("",!0):(g(),m("div",$a,"\u8BBE\u7F6E")),k(n("div",xa,[n("img",{class:"avatar",src:s(t).avatarUrl,alt:"",srcset:""},null,8,Ea),n("div",ba,D(s(t).name),1)],512),[[B,s(t).name]]),n("div",ka,[w(s(Y),{title:"Github access token"},{default:E(()=>[w(s(de),{disabled:a.value.length>0,modelValue:s(l),"onUpdate:modelValue":x[0]||(x[0]=S=>V(l)?l.value=S:l=S),placeholder:"\u8BF7\u8F93\u5165"},null,8,["disabled","modelValue"])]),_:1}),k(w(s(Y),{title:"\u9009\u62E9\u4E00\u4E2A Github \u4ED3\u5E93"},{default:E(()=>[w(s(ce),{modelValue:s(t).repoId,"onUpdate:modelValue":x[1]||(x[1]=S=>s(t).repoId=S),option:a.value,label:"name",value:"id"},null,8,["modelValue","option"])]),_:1},512),[[B,a.value.length>0]])]),k(w(s(I),{type:"primary",onClick:x[2]||(x[2]=S=>{V(i)?i.value=!0:i=!0,F()}),loading:s(i)},{default:E(()=>[Ba]),_:1},8,["loading"]),[[B,a.value.length==0]]),k(w(s(I),{type:"primary",onClick:x[3]||(x[3]=S=>C()),loading:s(o)},{default:E(()=>[Sa]),_:1},8,["loading"]),[[B,a.value.length>0]]),k(w(s(I),{type:"danger",onClick:x[4]||(x[4]=S=>A()),loading:s(d)},{default:E(()=>[Ia]),_:1},8,["loading"]),[[B,a.value.length>0]])]))}});var Aa=O(Ca,[["__scopeId","data-v-4fcfe3b9"]]);const pe=e=>(z("data-v-4bc60ad7"),e=e(),G(),e),La={class:"about-wrapper"},Da=pe(()=>n("div",{class:"title-1"},"\u5173\u4E8E",-1)),Ma=pe(()=>n("div",{class:"content"},[y(" CS176 \u73B0\u4EE3\u524D\u7AEF\u5E94\u7528\u5F00\u53D1\u5B9E\u8DF5"),n("br"),y(" \u5927\u4F5C\u4E1A\uFF1A\u56FE\u7247\u4E0A\u4F20\u7BA1\u7406\u5DE5\u5177PicBox"),n("br"),y(" \u5218\u51E1\u5609 \u5B66\u53F7\uFF1A520021910751"),n("br"),y(" \u4ED3\u5E93\u5730\u5740\uFF1A"),n("a",{target:"_blank",href:"https://github.com/Suvanka/PicBox"},"https://github.com/Suvanka/PicBox")],-1)),Oa=[Da,Ma],Pa=M({setup(e){return(a,t)=>(g(),m("div",La,Oa))}});var Ta=O(Pa,[["__scopeId","data-v-4bc60ad7"]]);const Va=[{path:"/",name:"Index",component:ya,meta:{}},{path:"/setting",name:"Setting",component:Aa,meta:{}},{path:"/about",name:"About",component:Ta,meta:{}}],qa=Ae({history:Le(""),routes:Va,scrollBehavior(e,a,t){return{el:"#app",top:0,behavior:"smooth"}}});const _e=De(Xt);_e.use(qa);_e.mount("#app");
