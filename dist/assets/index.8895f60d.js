var ge=Object.defineProperty,me=Object.defineProperties;var he=Object.getOwnPropertyDescriptors;var le=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var Z=(e,a,t)=>a in e?ge(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,U=(e,a)=>{for(var t in a||(a={}))fe.call(a,t)&&Z(e,t,a[t]);if(le)for(var t of le(a))ye.call(a,t)&&Z(e,t,a[t]);return e},G=(e,a)=>me(e,he(a));var ne=(e,a,t)=>(Z(e,typeof a!="symbol"?a+"":a,t),t);import{C as Fe,a as we,b as $e,e as xe,d as Ee,c as be,f as M,o as g,g as m,r as ue,n as P,h as n,i as F,t as D,j as V,k as h,w as N,l as b,v as ke,m as Be,F as W,p as K,q as j,s as z,u as X,x as ee,y as R,z as f,A as E,B as s,D as T,E as B,G as Se,H as Ie,I as Ce,J as Ae,K as Le,L as De}from"./vendor.624dd54d.js";const Me=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerpolicy&&(l.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?l.credentials="include":i.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}};Me();const x=({type:e,text:a})=>{let t=document.getElementById("alert-box");var o=document.createElement("div");let i={success:'<svg class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512"><path d="M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M352 176L217.6 336L160 272"></path></svg>',warning:'<svg class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512"><path d="M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></path><path d="M250.26 166.05L256 288l5.73-121.95a5.74 5.74 0 0 0-5.79-6h0a5.74 5.74 0 0 0-5.68 6z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path d="M256 367.91a20 20 0 1 1 20-20a20 20 0 0 1-20 20z" fill="currentColor"></path></svg>',danger:'<svg class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512"><path d="M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M320 320L192 192"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M192 320l128-128"></path></svg>'};o.innerHTML=`${i[e]}<span>${a}</span>`,o.style.cssText="",o.setAttribute("class",`alert alert-${e} shadow`),t.appendChild(o,t.childNodes[0]),setTimeout(()=>{o.setAttribute("class",`alert alert-${e} alert-show shadow`),setTimeout(()=>{o.setAttribute("class",`alert alert-${e} alert-hidden`),setTimeout(()=>{t.removeChild(o)},250)},2500)},10)};function re(e){if(!e)return"";var a=1024;return e<a?e+" b":e<Math.pow(a,2)?(e/a).toFixed(2)+" KB":e<Math.pow(a,3)?(e/Math.pow(a,2)).toFixed(2)+" M":e<Math.pow(a,4)?(e/Math.pow(a,3)).toFixed(2)+" G":(e/Math.pow(a,4)).toFixed(2)+" T"}function te(){var e=new Fe(".copy-btn");e.on("success",a=>{x({type:"success",text:"\u590D\u5236\u6210\u529F\uFF01"}),e.destroy()}),e.on("error",a=>{x({type:"danger",text:"\u590D\u5236\u5931\u8D25\uFF01"}),e.destroy()})}function Oe(e){switch(!0){case e=="Bad credentials":return"access token \u9519\u8BEF";case e.indexOf("wasn't supplied")>=0:return"\u8BF7\u52FF\u91CD\u590D\u4E0A\u4F20\u76F8\u540C\u5185\u5BB9";case e=="This repository is empty.":return"\u5F53\u524D\u4ED3\u5E93\u4E3A\u7A7A\uFF0C\u8BF7\u65B0\u5EFA\u4E00\u4E2A\u6587\u4EF6\u5939";case e=="path cannot start with a slash":return"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A";case e=="Requires authentication":return"access token \u9519\u8BEF";case e=="Bad credentials":return"\u672A\u77E5\u9519\u8BEF";default:return"\u672A\u77E5\u9519\u8BEF"}}class Te{constructor(a){ne(this,"instance");this.instance=we.create(a),this.instance.interceptors.request.use(t=>{let o=localStorage.getItem("token");return o&&(t.headers={Authorization:`token ${o}`}),t},t=>(console.log(t),Promise.reject(t))),this.instance.interceptors.response.use(t=>t,t=>(t.response.data.message!="Not Found"&&x({type:"danger",text:Oe(t.response.data.message)}),Promise.reject(t)))}request(a){return new Promise((t,o)=>{this.instance.request(a).then(i=>{t(i)}).catch(i=>(o(i),i))})}get(a){return this.request(G(U({},a),{method:"GET"}))}post(a){return this.request(G(U({},a),{method:"POST"}))}put(a){return this.request(G(U({},a),{method:"PUT"}))}delete(a){return this.request(G(U({},a),{method:"DELETE"}))}patch(a){return this.request(G(U({},a),{method:"PATCH"}))}}const q=new Te({baseURL:"https://api.github.com",timeout:3e4}),Pe=(e,a)=>new Promise(async t=>{const i=await new $e(e,{encoderState:{type:"mozJPEG",options:xe.mozJPEG.meta.defaultOptions},processorState:Ee,preprocessorState:be}).process(),l=await ie(i),d=await ie(e);t({name:`${e.name.substring(0,e.name.lastIndexOf("."))}_${qe(6)}`,orginal_size:e.size,compress_size:i.size,base64data:l.replace(/^data:image\/\w+;base64,/,""),base64:l,orginal_base64data:d.replace(/^data:image\/\w+;base64,/,""),orginal_base64:d,folder:a,ext:Ve(e.name)})}),ie=e=>new Promise(async a=>{var t=new FileReader;t.readAsDataURL(e),t.onload=function(o){a(o.target.result)}});function Ve(e){var a=/\.[^\.]+$/,t=a.exec(e);return t?t[0]:""}function qe(e){return Array.from(Array(Number(e)||24),()=>Math.floor(Math.random()*36).toString(36)).join("")}var O=(e,a)=>{for(const[t,o]of a)e[t]=o;return e};const Ne=M({props:{type:{type:String,default:"default"},loading:{type:Boolean,default:!1}},setup(e){const a=e;return(t,o)=>(g(),m("button",{class:P(["button",`button-${a.type}  ${a.loading?"button-loading":""}`])},[ue(t.$slots,"default",{},void 0,!0)],2))}});var I=O(Ne,[["__scopeId","data-v-1f5f32e1"]]);const Ue={class:"title-label"},Ge=["href"],je=["innerHTML"],ze=M({props:{title:{type:String,default:"\u6807\u9898"},direction:{type:String,default:""},small_title:{type:String,default:""},small_title_link:{type:String,default:""},tips:{type:String,default:""}},setup(e){const a=e;return(t,o)=>(g(),m("div",{class:P(["form-item",{isRow:a.direction=="row"}])},[n("label",Ue,[F(D(a.title)+" ",1),a.small_title?(g(),m("a",{key:0,target:"_blank",href:a.small_title_link},D(a.small_title),9,Ge)):V("",!0)]),n("div",null,[ue(t.$slots,"default",{},void 0,!0),e.tips?(g(),m("p",{key:0,class:"tips",innerHTML:e.tips},null,8,je)):V("",!0)])],2))}});var Q=O(ze,[["__scopeId","data-v-1c1caa4e"]]);const He=["disabled"],Re=M({props:{modelValue:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,o=h(t.modelValue);N(()=>t.modelValue,()=>{o.value=t.modelValue});const i=l=>{let{value:d}=l.target;a("update:modelValue",d)};return(l,d)=>b((g(),m("input",{"onUpdate:modelValue":d[0]||(d[0]=c=>o.value=c),onInput:i,disabled:t.disabled},null,40,He)),[[ke,o.value]])}});var de=O(Re,[["__scopeId","data-v-4ada4ad8"]]);const Je=e=>(j("data-v-ae18d42e"),e=e(),z(),e),We=Je(()=>n("option",{value:"",hidden:""},"\u672A\u9009\u62E9",-1)),Ke=["value"],Qe=M({props:{modelValue:{type:String||Number,default:""},option:{type:Array,default:[]},label:{type:String||Number,default:""},value:{type:String||Number,default:""}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,o=h(t.modelValue);N(()=>t.modelValue,()=>{o.value=t.modelValue});const i=l=>{let{value:d}=l.target;a("update:modelValue",d)};return(l,d)=>b((g(),m("select",{"onUpdate:modelValue":d[0]||(d[0]=c=>o.value=c),onChange:i},[We,(g(!0),m(W,null,K(t.option,c=>(g(),m("option",{value:c[e.value],key:c[e.label]},D(c[e.label]),9,Ke))),128))],544)),[[Be,o.value]])}});var ce=O(Qe,[["__scopeId","data-v-ae18d42e"]]);const Y=e=>(j("data-v-09665e0d"),e=e(),z(),e),Ye=Y(()=>n("path",{d:"M400 145.49L366.51 112L256 222.51L145.49 112L112 145.49L222.51 256L112 366.51L145.49 400L256 289.49L366.51 400L400 366.51L289.49 256L400 145.49z",fill:"currentColor"},null,-1)),Ze=[Ye],Xe={class:"select"},et={class:"upload-list"},tt=Y(()=>n("svg",{class:"upload-icon",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},[n("path",{d:"M320 367.79h76c55 0 100-29.21 100-83.6s-53-81.47-96-83.6c-8.89-85.06-71-136.8-144-136.8c-69 0-113.44 45.79-128 91.2c-60 5.7-112 43.88-112 106.4s54 106.4 120 106.4h56",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"18"}),n("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"18",d:"M320 255.79l-64-64l-64 64"}),n("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"18",d:"M256 448.21V207.79"})],-1)),at={class:"title-label"},st={class:"status-box"},ot={class:"icon icon-success",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},lt=Y(()=>n("path",{fill:"none",stroke:"currentColor","stroke-linecap":"square","stroke-miterlimit":"10","stroke-width":"44",d:"M416 128L192 384l-96-96"},null,-1)),nt=[lt],ut={class:"icon icon-uploading",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},rt=Y(()=>n("path",{d:"M256 48C141.13 48 48 141.13 48 256s93.13 208 208 208s208-93.13 208-208S370.87 48 256 48zm83.69 282.65a112.24 112.24 0 0 1-195-61.29a16 16 0 0 1-20.13-24.67l23.6-23.6a16 16 0 0 1 22.37-.25l24.67 23.6a16 16 0 0 1-18 26a80.25 80.25 0 0 0 138.72 38.83a16 16 0 0 1 23.77 21.41zm47.76-63.34l-23.6 23.6a16 16 0 0 1-22.37.25l-24.67-23.6a16 16 0 0 1 17.68-26.11A80.17 80.17 0 0 0 196 202.64a16 16 0 1 1-23.82-21.37a112.17 112.17 0 0 1 194.88 61.57a16 16 0 0 1 20.39 24.47z",fill:"currentColor"},null,-1)),it=[rt],dt={class:"info"},ct={class:"name"},pt={class:"tag-box"},_t={class:"tag folder"},vt={class:"tag orginal-size"},gt=["src"],mt={class:"btn-box"},ht=F("\u6E05\u7A7A"),ft=F("\u4E0A\u4F20"),yt=M({props:{isOpen:Boolean,folders:Array},emits:["Close","SetLoading"],setup(e,{emit:a}){const t=e,o=X(),i=ee();let l=h(o.query.folder),d=h([]);N(()=>o.query,r=>{l.value=r.folder||""}),N(()=>l.value,r=>{o.path!="/setting"&&i.push(`/?folder=${r}`)});let c=JSON.parse(localStorage.getItem("github_config")),_=h(null),w=h(!1),k=h(!1);R(()=>{let r=document.getElementById("drop-area");r.addEventListener("drop",C,!1);let p="";r.addEventListener("dragleave",u=>{clearTimeout(p),p=setTimeout(()=>{u.stopPropagation(),u.preventDefault(),k.value=!1},200)}),r.addEventListener("dragover",u=>{u.stopPropagation(),u.preventDefault(),k.value=!0})});const C=r=>{if(!l.value){x({type:"danger",text:"\u8BF7\u9009\u62E9\u6587\u4EF6\u5939"});return}let p=r.dataTransfer.files;k.value=!1,r.stopPropagation(),r.preventDefault();let u=[];console.log(p);for(let L=0;L<=p.length-1;L++)console.log(p[L].type.indexOf("image")!==-1),p[L].type.indexOf("image")!==-1?u.push(p[L]):x({type:"danger",text:`${p[L].name} \u4E0D\u662F\u56FE\u7247\u6587\u4EF6`});$(u)},A=r=>{if(!l.value){x({type:"danger",text:"\u8BF7\u9009\u62E9\u6587\u4EF6\u5939"});return}const p=r.clipboardData.items;let u=null;p.length>0&&(p[0].kind=="file"?(u=p[0].getAsFile(),u.type.indexOf("image")>=0?$([u]):x({type:"danger",text:"\u8BF7\u7C98\u8D34\u56FE\u7247\u6587\u4EF6"})):x({type:"danger",text:"\u8BF7\u7C98\u8D34\u56FE\u7247\u6587\u4EF6"}))},y=r=>{if(!l.value){x({type:"danger",text:"\u8BF7\u9009\u62E9\u6587\u4EF6\u5939"});return}let p=r.target.files;$(p)},$=async r=>{w.value=!0,x({type:"warning",text:"\u8BFB\u53D6\u4E2D"});let p=[];p=await Promise.all([...r].map(u=>Pe(u,l.value))),x({type:"success",text:"\u8BFB\u53D6\u5B8C\u6210"}),w.value=!1,d.value=d.value.concat(p)},S=async r=>{_.value=r;let p=0;await Promise.all(d.value.map((u,L)=>(d.value[L].status="uploading",new Promise(J=>{let oe=r==1?`${u.name}_${u.ext}`:`${u.name}_.jpeg`;setTimeout(()=>{q.put({url:`/repos/${c.owner}/${c.repoPath}/contents/${l.value}/${oe}`,data:{message:"upload a image by picbox",content:r==1?u.orginal_base64data:u.base64data}}).then(ve=>{let H=ve.data.content;u.status="success",d.value[L].status="success",u.url=H.url,u.download_url=H.download_url,u.cdn_url=`https://git.pink/${c.owner}/${c.repoPath}/blob/main/${l.value}/${oe}?raw=true`,u.git_url=H.git_url,u.sha=H.sha,u.upload_type=r,u.html_url=H.html_url,v(u),J(200)}).catch(()=>{u.status="fail",d.value[L].status="fail",J(400)})},p+=1e3)})))),x({type:"success",text:"\u4E0A\u4F20\u5B8C\u6210"}),_.value=0,d.value=d.value.filter(u=>u.status!="success"),i.push(o.fullPath+="&t="+new Date().getTime())},v=r=>{r.name,r.orginal_size,r.base64,r.folder,r.status,r.ext,r.cdn_url};return(r,p)=>(g(),m("div",{class:P(["image-modal",{isOpen:t.isOpen}]),id:"drop-area",onPaste:A},[(g(),m("svg",{onClick:p[0]||(p[0]=u=>a("Close")),class:"icon-close",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ze)),n("div",Xe,[f(s(Q),{title:"\u9009\u62E9\u6587\u4EF6\u5939"},{default:E(()=>[f(s(ce),{modelValue:s(l),"onUpdate:modelValue":p[1]||(p[1]=u=>T(l)?l.value=u:l=u),option:t.folders,label:"name",value:"name"},null,8,["modelValue","option"])]),_:1})]),n("div",et,[n("label",{class:P(["upload-box",{dropActive:s(k),uploadBoxLoading:s(w)}])},[tt,F(D(s(k)?"\u677E\u5F00\u9F20\u6807\u4E0A\u4F20\u6587\u4EF6":"\u70B9\u51FB\u3001\u62D6\u62FD\u3001\u7C98\u8D34\u5230\u6B64\u5904\u4E0A\u4F20\u6587\u4EF6")+" ",1),b(n("input",{onChange:y,type:"file",name:"file",accept:"image/*",multiple:""},null,544),[[B,!1]])],2),b(n("div",at,"\u5F85\u4E0A\u4F20\u56FE\u7247",512),[[B,s(d).length>0]]),(g(!0),m(W,null,K(s(d),u=>(g(),m("div",{key:u.name,class:"item"},[n("div",st,[b((g(),m("svg",ot,nt,512)),[[B,u.status=="success"]]),b((g(),m("svg",ut,it,512)),[[B,u.status=="uploading"]])]),n("div",dt,[n("div",ct,D(`${u.name}_.jpeg`),1),n("div",pt,[n("span",_t,D(u.folder),1),n("span",vt,D(s(re)(u.orginal_size)),1)])]),n("img",{src:u.base64,class:"image"},null,8,gt)]))),128))]),n("div",mt,[b(f(s(I),{style:{width:"220px"},onClick:p[2]||(p[2]=u=>T(d)?d.value=[]:d=[]),type:"danger"},{default:E(()=>[ht]),_:1},512),[[B,s(d).length>0]]),b(f(s(I),{onClick:p[3]||(p[3]=u=>S(1)),type:"primary",style:{width:"220px"},loading:s(_)==1},{default:E(()=>[ft]),_:1},8,["loading"]),[[B,s(d).length>0]])])],34))}});var Ft=O(yt,[["__scopeId","data-v-09665e0d"]]);const wt={class:"form-item btn-box"},$t=F(" \u786E\u8BA4 "),xt=F("\u53D6\u6D88"),Et=M({props:{isOpen:Boolean},emits:["close","updateFolderList"],setup(e,{emit:a}){const t=e;let o=JSON.parse(localStorage.getItem("github_config")),i=h(""),l=h(!1);const d=()=>{if(!(o==null?void 0:o.repoId)){x({type:"danger",text:"\u8BF7\u524D\u5F80\u8BBE\u7F6E\uFF0C\u5B8C\u6210\u914D\u7F6E\u4FE1\u606F"});return}l.value=!0,q.put({url:`/repos/${o.owner}/${o.repoPath}/contents/${i.value}/init`,data:{message:"add a forder",content:"5q2k5paH5Lu255So5LqO5Yib5bu65paH5Lu25aS5"}}).then(c=>{l.value=!1,x({type:"success",text:"\u521B\u5EFA\u6210\u529F\uFF01"}),i.value="",a("close"),a("updateFolderList")}).catch(()=>{l.value=!1})};return(c,_)=>(g(),m("div",{class:P(["folder-modal",{isOpen:t.isOpen}])},[f(s(Q),{title:"\u65B0\u5EFA\u6587\u4EF6\u5939"},{default:E(()=>[f(s(de),{modelValue:s(i),"onUpdate:modelValue":_[0]||(_[0]=w=>T(i)?i.value=w:i=w),placeholder:"\u8F93\u5165\u6587\u4EF6\u5939\u540D\u79F0"},null,8,["modelValue"])]),_:1}),n("div",wt,[f(s(I),{onClick:_[1]||(_[1]=w=>d()),type:"primary",loading:s(l)},{default:E(()=>[$t]),_:1},8,["loading"]),f(s(I),{onClick:_[2]||(_[2]=w=>a("close")),type:"danger"},{default:E(()=>[xt]),_:1})])],2))}});var bt=O(Et,[["__scopeId","data-v-69bed7ea"]]);const ae=e=>(j("data-v-a47e1a38"),e=e(),z(),e),kt={class:"wrapper"},Bt={class:"sidebar"},St=ae(()=>n("div",{class:"header"},[n("div",{class:"mask"}),n("div",{class:"logo"},"PicBox")],-1)),It=["href"],Ct=ae(()=>n("span",{class:"status-point"},null,-1)),At={class:"tips"},Lt={key:0},Dt={key:1},Mt={key:2},Ot=F("\u672A\u8BBE\u7F6Etoken"),Tt=ae(()=>n("br",null,null,-1)),Pt=F("\u8BF7\u70B9\u51FB\u4E0B\u65B9\u8BBE\u7F6E"),Vt=[Ot,Tt,Pt],qt=F(" \u7ACB\u5373\u521B\u5EFA "),Nt={class:"handle-box"},Ut=F(" \u4E0A\u4F20\u56FE\u7247 "),Gt=F(" \u65B0\u5EFA\u6587\u4EF6\u5939 "),jt={href:"/#/setting"},zt=F(" \u8BBE\u7F6E "),Ht={href:"/#/about"},Rt=F(" \u5173\u4E8E "),Jt=M({emits:["SetImageModal"],setup(e,{expose:a,emit:t}){const o=X(),i=ee();let l=JSON.parse(localStorage.getItem("github_config")),d=h([]),c=h(!1),_=h(!1),w=h(!1);R(()=>{(l==null?void 0:l.repoId)&&k()}),N(()=>o.query,A=>{_.value=!1,!(l==null?void 0:l.owner)&&o.path!="/setting"&&o.path!="/about"?i.push("/setting"):o.query.reload&&k()}),N(()=>c.value,A=>{c.value?t("SetImageModal",!0):t("SetImageModal",!1)});const k=()=>{w.value=!0,q.get({url:`/repositories/${l.repoId}/contents?t=${new Date().getTime()}`}).then(A=>{w.value=!1,d.value=A.data.filter(y=>y.type=="dir"),o.path=="/"&&!o.query.folder&&i.push(`/?folder=${d.value[0].name}`)}).catch(()=>{w.value=!1})},C=()=>{if(!(l==null?void 0:l.repoId)){x({type:"danger",text:"\u8BF7\u524D\u5F80\u8BBE\u7F6E\uFF0C\u5B8C\u6210\u914D\u7F6E\u4FE1\u606F"});return}c.value=!c.value};return a({changeImageModel:C}),(A,y)=>{var $,S,v;return g(),m("div",kt,[n("div",Bt,[St,n("div",{class:P(["folder",{loading:s(w)}])},[(g(!0),m(W,null,K(s(d),(r,p)=>(g(),m("a",{key:p,class:P(["item",{active:s(o).query.folder==r.name}]),href:`/#/?folder=${r.name}`},[F(D(r.name)+" ",1),Ct],10,It))),128)),b(n("div",At,[s(d).length!=0?(g(),m("span",Lt,D(s(d).length)+" \u4E2A\u6587\u4EF6\u5939",1)):V("",!0),(($=s(l))==null?void 0:$.owner)&&s(d).length==0?(g(),m("span",Dt,"\u6682\u65E0\u6587\u4EF6\u5939 ")):V("",!0),((S=s(l))==null?void 0:S.owner)?V("",!0):(g(),m("span",Mt,Vt))],512),[[B,!s(w)]]),((v=s(l))==null?void 0:v.owner)&&s(d).length==0?b((g(),Se(I,{key:0,style:{"margin-top":"10px"},type:"primary",onClick:y[0]||(y[0]=r=>T(_)?_.value=!s(_):_=!s(_))},{default:E(()=>[qt]),_:1},512)),[[B,!s(w)]]):V("",!0)],2),f(bt,{onClose:y[1]||(y[1]=r=>T(_)?_.value=!1:_=!1),onUpdateFolderList:y[2]||(y[2]=r=>k()),isOpen:s(_)},null,8,["isOpen"]),n("div",Nt,[f(I,{onClick:C},{default:E(()=>[Ut]),_:1}),f(I,{onClick:y[3]||(y[3]=r=>T(_)?_.value=!s(_):_=!s(_))},{default:E(()=>[Gt]),_:1}),n("a",jt,[f(I,null,{default:E(()=>[zt]),_:1})]),n("a",Ht,[f(I,null,{default:E(()=>[Rt]),_:1})])])]),f(Ft,{isOpen:s(c),folders:s(d),onClose:C},null,8,["isOpen","folders"])])}}});var Wt=O(Jt,[["__scopeId","data-v-a47e1a38"]]);const Kt=e=>(j("data-v-571d62ec"),e=e(),z(),e),Qt={class:"wrapper"},Yt=Kt(()=>n("div",{id:"alert-box"},null,-1)),Zt=M({setup(e){let a=h(!1),t=h(!1);const o=c=>{a.value=c},i=c=>{t.value=c},l=h(null),d=()=>{l.value.changeImageModel()};return R(()=>{localStorage.getItem("github_config")&&JSON.parse(localStorage.getItem("github_config"))}),(c,_)=>{const w=Ie("router-view");return g(),m("div",Qt,[Yt,f(Wt,{onSetImageModal:o,ref:(k,C)=>{C.sideberRef=k,l.value=k}},null,512),n("div",{class:P(["main",{loading:s(t)}]),id:"main",style:Ce(s(a)?"width:calc(100% - 700px);margin-left:500px":"width:calc(100% - 200px)")},[f(w,{onSetLoading:i,onOpenUploadModel:_[0]||(_[0]=k=>d())})],6)])}}});var Xt=O(Zt,[["__scopeId","data-v-571d62ec"]]);const se=e=>(j("data-v-d12dcb0a"),e=e(),z(),e),ea={class:"index-wrapper"},ta={class:"not-found"},aa=se(()=>n("div",{class:"title"},"\u65E0\u56FE\u7247",-1)),sa=se(()=>n("br",null,null,-1)),oa=se(()=>n("br",null,null,-1)),la={style:{"margin-top":"10px"}},na=F("\u4E0A\u4F20\u56FE\u7247"),ua=F("\u5220\u9664\u6587\u4EF6\u5939"),ra={class:"list"},ia=["onClick"],da=["data-info","href"],ca=["src"],pa={class:"info"},_a={class:"name"},va={class:"copy-box"},ga=["data-clipboard-text"],ma=["data-clipboard-text"],ha=["data-clipboard-text"],fa={key:0,class:"footer"},ya=M({emits:["SetLoading","OpenUploadModel"],setup(e,{expose:a,emit:t}){const o=X(),i=ee();N(()=>o.query,v=>{v.folder&&_(v.folder)});let l=h([]),d=h([]);R(()=>{(c==null?void 0:c.owner)?_(o.query.folder):i.push("/setting")});let c=JSON.parse(localStorage.getItem("github_config"));const _=v=>{t("SetLoading",!0),q.get({url:`/repositories/${c==null?void 0:c.repoId}/contents/${v||""}?t=${new Date().getTime()}`}).then(r=>{d.value=r.data,t("SetLoading",!1),r.data.forEach(u=>{u.download_url&&(u.origin_url=`https://raw.githubusercontent.com/${c.owner}/${c.repoPath}/main/${v}/${u.name}`,u.cdn_url=`https://cdn.jsdelivr.net/gh/${c.owner}/${c.repoPath}@master/${v}/${u.name}`)});function p(u){var L=u.lastIndexOf("."),J=u.substr(L+1);return["png","jpg","jpeg","bmp","gif","webp","psd","svg","tiff"].indexOf(J.toLowerCase())>=0}l.value=r.data.filter(u=>p(u.name))}).catch(()=>{t("SetLoading",!1)})},w=v=>{var r=v.substring(v.lastIndexOf("/")+1);return`![${r}](${v})`},k=v=>` ${v}`,C=v=>` ${v}`;let A=h(!1);const y=()=>{var v,r;((v=d.value[0])==null?void 0:v.name)=="init"?(A.value=!0,q.delete({url:`/repos/${c.owner}/${c.repoPath}/contents/${o.query.folder}/init`,data:{message:"delete init file",sha:(r=d.value[0])==null?void 0:r.sha}}).then(()=>{x({type:"success",text:"\u5220\u9664\u6210\u529F"}),A.value=!1,i.push("/?reload=true")})):x({type:"success",text:"\u8BE5\u6587\u4EF6\u5939\u5185\u6709\u5176\u4ED6\u6587\u4EF6\uFF0C\u8BF7\u5148\u767B\u5F55Github\u4E2D\u5220\u9664\u6240\u6709\u6587\u4EF6\u3002"})},$=v=>{t("SetLoading",!0),q.delete({url:`/repos/${c.owner}/${c.repoPath}/contents/${o.query.folder}/${v.name}`,data:{message:"delete a image",sha:v.sha}}).then(()=>{x({type:"success",text:"\u5220\u9664\u6210\u529F"}),_(o.query.folder)}).catch(()=>{t("SetLoading",!1)})},S=v=>`
    <div class="image-info">
    <div class="item"><span>\u540D\u79F0</span><div>${v.name}</div></div>
    <div class="item"><span>\u5927\u5C0F</span><div>${re(v.size)}</div></div>
    <div class="item"><span>url</span><div>${v.url}</div></div>
    <div class="item"><span>html_url</span><div>${v.html_url}</div></div>
    <div class="item"><span>git_url</span><div>${v.git_url}</div></div>
    <div class="item"><span>download_url</span><div>${v.download_url}</div> </div>
  `;return a({GetImages:_}),(v,r)=>(g(),m("div",ea,[b(n("div",ta,[aa,sa,oa,n("div",la,[f(I,{onClick:r[0]||(r[0]=p=>t("OpenUploadModel")),type:"primary",style:{width:"120px",margin:"10px auto"}},{default:E(()=>[na]),_:1}),f(I,{onClick:y,type:"danger",loading:s(A),style:{width:"120px",margin:"0 auto"}},{default:E(()=>[ua]),_:1},8,["loading"])])],512),[[B,s(l).length==0]]),b(n("div",ra,[(g(!0),m(W,null,K(s(l),p=>(g(),m("div",{key:`${p.name}`,class:"item"},[n("div",{onClick:u=>$(p),class:"del"},null,8,ia),n("a",{class:"image","data-info":S(p),href:p.cdn_url,"data-fancybox":"gallery"},[n("img",{src:p.cdn_url,loading:"lazy"},null,8,ca)],8,da),n("div",pa,[n("div",_a,D(p.name),1),n("div",va,[n("span",{class:"copy-btn","data-clipboard-text":C(p.origin_url),onClick:r[1]||(r[1]=u=>s(te)())},"url",8,ga),n("span",{class:"copy-btn","data-clipboard-text":k(p.cdn_url),onClick:r[2]||(r[2]=u=>s(te)())},"cdn",8,ma),n("span",{class:"copy-btn","data-clipboard-text":w(p.cdn_url),onClick:r[3]||(r[3]=u=>s(te)())},"markdown",8,ha)])])]))),128))],512),[[B,s(l).length>0]]),s(l).length>0?(g(),m("div",fa,D(s(l).length)+" \u5F20\u56FE\u7247 ",1)):V("",!0)]))}});var Fa=O(ya,[["__scopeId","data-v-d12dcb0a"]]);const wa={class:"form"},$a={key:0,class:"title-1"},xa={class:"user-info"},Ea=["src"],ba={class:"name"},ka={class:"form"},Ba=F(" \u786E\u5B9A "),Sa=F(" \u4F7F\u7528\u6D4B\u8BD5\u4ED3\u5E93\uFF08Demo\uFF09 "),Ia=F(" \u4FDD\u5B58\u914D\u7F6E "),Ca=F(" \u5220\u9664\u914D\u7F6E "),Aa=M({setup(e){R(()=>{if(localStorage.getItem("github_config")){let y=JSON.parse(localStorage.getItem("github_config"));t.value=y}else t.value.repoId="";localStorage.getItem("token")&&(o.value=localStorage.getItem("token"),_())});const a=h([]);let t=h({}),o=h(""),i=h(!1),l=h(!1),d=h(!1),c=h(!1);const _=()=>{q.get({url:"/user"}).then(y=>{t.value.owner=y.data.login,t.value.name=y.data.name,t.value.avatarUrl=y.data.avatar_url,localStorage.setItem("github_config",JSON.stringify(t.value)),k()}).catch(()=>{i.value=!1,c.value=!1})},w=()=>{localStorage.setItem("token",o.value),_()},k=()=>{q.get({url:`/users/${t.value.owner}/repos?type=public&sort=created&per_page=100`}).then(y=>{a.value=y.data,i.value=!1,!t.value.repoId&&o.value=="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"&&(t.value.repoId=480610843,C())})},C=()=>{if(!t.value.repoId){x({type:"warning",text:"\u8BF7\u9009\u62E9\u4ED3\u5E93"});return}l.value=!0,t.value.repoPath=a.value.find(y=>t.value.repoId==y.id).name,localStorage.setItem("github_config",JSON.stringify(t.value)),setTimeout(()=>{x({type:"success",text:"\u4FDD\u5B58\u6210\u529F\uFF01"}),l.value=!1,location.reload()},500)},A=()=>{localStorage.removeItem("token"),localStorage.removeItem("github_config"),localStorage.removeItem("history_list"),d.value=!0,x({type:"success",text:"\u5220\u9664\u6210\u529F"}),setTimeout(()=>{d.value=!1,location.reload()},500)};return(y,$)=>(g(),m("div",wa,[s(t).name?V("",!0):(g(),m("div",$a,"\u8BBE\u7F6E")),b(n("div",xa,[n("img",{class:"avatar",src:s(t).avatarUrl,alt:"",srcset:""},null,8,Ea),n("div",ba,D(s(t).name),1)],512),[[B,s(t).name]]),n("div",ka,[f(s(Q),{title:"Github access token"},{default:E(()=>[f(s(de),{disabled:a.value.length>0,modelValue:s(o),"onUpdate:modelValue":$[0]||($[0]=S=>T(o)?o.value=S:o=S),placeholder:"\u8BF7\u8F93\u5165"},null,8,["disabled","modelValue"])]),_:1}),b(f(s(Q),{title:"\u9009\u62E9\u4E00\u4E2A Github \u4ED3\u5E93"},{default:E(()=>[f(s(ce),{modelValue:s(t).repoId,"onUpdate:modelValue":$[1]||($[1]=S=>s(t).repoId=S),option:a.value,label:"name",value:"id"},null,8,["modelValue","option"])]),_:1},512),[[B,a.value.length>0]])]),b(f(s(I),{type:"primary",onClick:$[2]||($[2]=S=>{T(i)?i.value=!0:i=!0,w()}),loading:s(i)},{default:E(()=>[Ba]),_:1},8,["loading"]),[[B,a.value.length==0]]),b(f(s(I),{type:"gray",onClick:$[3]||($[3]=S=>{T(c)?c.value=!0:c=!0,T(o)?o.value="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":o="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",w()}),loading:s(c)},{default:E(()=>[Sa]),_:1},8,["loading"]),[[B,a.value.length==0]]),b(f(s(I),{type:"primary",onClick:$[4]||($[4]=S=>C()),loading:s(l)},{default:E(()=>[Ia]),_:1},8,["loading"]),[[B,a.value.length>0]]),b(f(s(I),{type:"danger",onClick:$[5]||($[5]=S=>A()),loading:s(d)},{default:E(()=>[Ca]),_:1},8,["loading"]),[[B,a.value.length>0]])]))}});var La=O(Aa,[["__scopeId","data-v-4d58e90a"]]);const pe=e=>(j("data-v-4bc60ad7"),e=e(),z(),e),Da={class:"about-wrapper"},Ma=pe(()=>n("div",{class:"title-1"},"\u5173\u4E8E",-1)),Oa=pe(()=>n("div",{class:"content"},[F(" CS176 \u73B0\u4EE3\u524D\u7AEF\u5E94\u7528\u5F00\u53D1\u5B9E\u8DF5"),n("br"),F(" \u5927\u4F5C\u4E1A\uFF1A\u56FE\u7247\u4E0A\u4F20\u7BA1\u7406\u5DE5\u5177PicBox"),n("br"),F(" \u5218\u51E1\u5609 \u5B66\u53F7\uFF1A520021910751"),n("br"),F(" \u4ED3\u5E93\u5730\u5740\uFF1A"),n("a",{target:"_blank",href:"https://github.com/Suvanka/PicBox"},"https://github.com/Suvanka/PicBox")],-1)),Ta=[Ma,Oa],Pa=M({setup(e){return(a,t)=>(g(),m("div",Da,Ta))}});var Va=O(Pa,[["__scopeId","data-v-4bc60ad7"]]);const qa=[{path:"/",name:"Index",component:Fa,meta:{}},{path:"/setting",name:"Setting",component:La,meta:{}},{path:"/About",name:"About",component:Va,meta:{}}],Na=Ae({history:Le(""),routes:qa,scrollBehavior(e,a,t){return{el:"#app",top:0,behavior:"smooth"}}});const _e=De(Xt);_e.use(Na);_e.mount("#app");
